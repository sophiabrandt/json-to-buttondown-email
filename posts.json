{"titles":[" Build Faster Websites With Less JavaScript Using Astro (Tutorial)"," I'm Taking a Break"," TIL: How to Fix ”Cannot Read Termcap Database” With Tmux and Kitty on MacOs"," Notes on “Hashnode Talks: Saas, Software Engineering and Social Media With Simon Høiberg“"," I Started My New Job (And Have MacOS Woes)"," TIL: How to Remove Headers From ps Command on MacOs"," How to Build Any Kind of App by Andrea Bizzotto"],"content":"Hello 👋! Thanks for subscribing.\n\n\nHere are the articles from last week:\n\n## [Build Faster Websites With Less JavaScript Using Astro (Tutorial)](https://www.rockyourcode.com/build-faster-websites-with-less-javascript-using-astro-tutorial/)\nPublished on: 2021-07-18\n\ntags: JavaScript\n\n\nStatic site generators improve performance and security of web pages. They can be cached and it's easy to deploy them to a CDN (Content Delivery Network).\n\nStatic sites are an ideal candidate for web pages that don't require highly dynamic content, for example, blogs or portfolio pages.\n\n**[Astro][astro]** is a new static site builder for JavaScript developers that is lightning fast.\n\nIn the future, I can see it as a replacement for tools like Hugo (written in Go) or Gatsby (JavaScript + React).\n\nHere are some [benefits of using Astro][introduce]:\n\n> - Bring Your Own Framework (BYOF): Build your site using React, Svelte, Vue, Preact, web components, or just plain ol’ HTML + JavaScript.\n> - 100% Static HTML, No JS: Astro renders your entire page to static HTML, removing all JavaScript from your final build by default.\n> - On-Demand Components: Need some JS? Astro can automatically hydrate interactive components when they become visible on the page. If the user never sees it, they never load it.\n> - Fully-Featured: Astro supports TypeScript, Scoped CSS, CSS Modules, Sass, Tailwind, Markdown, MDX, and any of your favorite npm packages.\n> - SEO Enabled: Automatic sitemaps, RSS feeds, pagination and collections take the pain out of SEO and syndication\n\nAstro is still in beta, but let's take a look at the current state of affairs.\n\n## Let's Build A Static Site With Astro\n\n### 1. Installation\n\nYou'll need Node.js - v12.20.0, v14.13.1, v16.0.0, or higher.\n\nIn the command-line terminal:\n\n```bash\nmkdir <project-name>\ncd <project-name>\nnpm init astro\n```\n\nChoose the blank starter project.\n\nFollow the instructions to install Astro.\n\nRun `npm run start` and the development server will start on port 3000 (navigate to `http://localhost:3000` in your web browser).\n\n### 2. Load Blog Posts from JSON Endpoint\n\nWe will now create dynamic pages from an API. The website [JSONPlaceholder](https://jsonplaceholder.typicode.com/) can give us 100 fake blog posts.\n\nWe need to use [Astro collections](https://docs.astro.build/core-concepts/collections) to generate multiple pages from a single template.\n\nIf you use Astro, you need to follow their [project structure](https://docs.astro.build/core-concepts/project-structure). Pages belong in the `src/pages` folder.\n\nCreate a new file as `src/pages/$posts.astro` (the `$`-sign is important as it tells Astro that this file will create a collection):\n\n```jsx\n// src/pages/$posts.astro\n---\n// Define the `collection` prop.\nconst { collection } = Astro.props;\n\n// Define a `createCollection` function.\n// In this example, we'll create a new page for every post.\nexport async function createCollection() {\n\tconst allPostsResponse = await fetch('https://jsonplaceholder.typicode.com/posts');\n  const allPosts= await allPostsResponse.json();\n  return {\n    // `routes` defines the total collection of routes as data objects.\n    routes: allPosts.map((p) => {\n      const params = {title: p.title, id: p.id};\n      return params;\n    }),\n    // `permalink` defines the final URL for each route object defined in `routes`.\n    permalink: ({ params }) => `/posts/${params.id}`,\n    // `data` is now responsible for return the data for each page.\n    // Luckily we had already loaded all of the data at the top of the function,\n    // so we just filter the data here to group pages by first letter.\n    // If you needed to fetch more data for each page, you can do that here as well.\n    // Note: data() is expected to return an array!\n    async data({ params }) {\n      return [allPosts[params.id]];\n    },\n    // Note: The default pageSize is fine because technically only one data object\n    // is ever returned per route. We set it to Infinity in this example for completeness.\n    pageSize: Infinity,\n  };\n}\n---\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>{collection.params?.title}</title>\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\">\n    <link rel=\"stylesheet\" href=\"/style/global.css\">\n    <link rel=\"stylesheet\" href=\"/style/home.css\">\n\n    <style>\n    </style>\n</head>\n<body>\n    <main>\n\t\t<p>Post placeholder</p>\n    </main>\n</body>\n</html>\n```\n\nEverything inside the `---` dashes is _server_-side JavaScript. Here we use the JavaScript [fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) to load all blog posts from JSONPlaceholder.\n\nIf you open the browser on `http://localhost:3000/posts/1` you'll see `Post placeholder`, but not the content of the post.\n\nLet's remedy that and create a component for each blog post.\n\nCreate a new file: `src/components/Post.astro`:\n\n```jsx\n// src/components/Post.astro\n---\n\nexport interface Props {\n  title: string;\n  body: string\n}\n\nconst {title, body } = Astro.props\n---\n<header>\n    <div>\n        <img width=\"60\" height=\"80\" src=\"/assets/logo.svg\" alt=\"Astro logo\">\n        <h1>{title?.charAt(0).toUpperCase() + title?.slice(1)}</h1>\n    </div>\n</header>\n<article>\n    <section>\n    </section>\n\t{body}\n     <section>\n    </section>\n</article>\n\n<style>\n    header {\n        display: flex;\n        flex-direction: column;\n        gap: 1em;\n\t\tmax-width: 68ch;\n    }\n    article {\n        padding-top: 2em;\n        line-height: 1.5;\n\t\tmax-width: 68ch;\n    }\n    section {\n        margin-top: 2em;\n        display: flex;\n        flex-direction: column;\n        gap: 1em;\n        max-width: 68ch;\n\t\tword-wap: break-word;\n    }\n</style>\n```\n\nHere we define two [props](https://docs.astro.build/core-concepts/astro-components): `title` and `body`. If you take a look at [https://jsonplaceholder.typicode.com/posts](https://jsonplaceholder.typicode.com/posts), you'll see that each blog post has a title and the content as the `body` key.\n\nThe `Post.astro` file displays the title in the `h1` HTML tag and the blog post content in the `article` HTML tag. There is some basic [(scoped) CSS][scoped] styling in the `style` tag. (Please don't judge my CSS skills.)\n\nChange the `$posts.astro` file to import our post template and use it to display the blog post:\n\n```jsx\n// src/pages/$posts.astro\n\n---\nimport Post from '../components/Post.astro'\n// Define the `collection` prop.\nconst { collection } = Astro.props;\n\n//\n---\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>{collection.params?.title}</title>\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/favicon.svg\">\n    <link rel=\"stylesheet\" href=\"/style/global.css\">\n    <link rel=\"stylesheet\" href=\"/style/home.css\">\n\n    <style>\n    </style>\n</head>\n<body>\n    <main>\n\t\t<Post title={collection.params?.title} body={collection.data[0]?.body}/>\n    </main>\n</body>\n</html>\n```\n\n(Complete file on [GitLab](https://gitlab.com/sophiabrandt/astro-build-demo/-/blob/collections/src/pages/$posts.astro)).\n\nNow go to `http://localhost:3000/post/3` and you should see one of our fake blog posts.\n\nYou can also [inspect the network tab in your browser](https://developer.chrome.com/docs/devtools/network/). You'll find no JavaScript (except the Astro hot reload development server which won't exist in production).\n\n## Let's Add React!\n\nBut what if we want to add a front-end framework like React or Vue? We can!\n\nFirst, we need to add the React renderer to Astro. [Open `astro.config.mjs` and add React to the `renderers` array](https://docs.astro.build/reference/configuration-reference):\n\n```js\n// astro.config.mjs\n\nexport default {\n  // projectRoot: '.',     // Where to resolve all URLs relative to. Useful if you have a monorepo project.\n  // pages: './src/pages', // Path to Astro components, pages, and data\n  // dist: './dist',       // When running `astro build`, path to final static output\n  // public: './public',   // A folder of static files Astro will copy to the root. Useful for favicons, images, and other files that don’t need processing.\n  buildOptions: {\n    // site: 'http://example.com',           // Your public domain, e.g.: https://my-site.dev/. Used to generate sitemaps and canonical URLs.\n    sitemap: true, // Generate sitemap (set to \"false\" to disable)\n  },\n  devOptions: {\n    // port: 3000,         // The port to run the dev server on.\n    // tailwindConfig: '', // Path to tailwind.config.js if used, e.g. './tailwind.config.js'\n  },\n  renderers: ['@astrojs/renderer-react'],\n}\n```\n\nStop your development server.  \nIn your terminal, type `npx astro --reload` to make sure that Astro loads the new settings.\n\nLet's try to display toast messages with [react-toastify](https://www.npmjs.com/package/react-toastify).\n\nWe need to install the package with npm:\n\n```bash\nnpm install --save react-toastify\n```\n\nCreate a new Toast component in `src/components/Toast.jsx`. I copied the basic example from the [documentation](https://github.com/fkhadra/react-toastify#the-gist) and renamed the component to `Toast` :\n\n```jsx\n// src/components/Toast.jsx\n\nimport React from 'react'\n\nimport { ToastContainer, toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nexport const Toast = () => {\n  const notify = () => toast('Astro is awesome!')\n\n  return (\n    <div>\n      <button style={{ marginTop: '2em', display: 'block' }} onClick={notify}>\n        Click Me\n      </button>\n      <ToastContainer />\n    </div>\n  )\n}\n```\n\nThe component shows a basic button with an onClickHandler. If you've written React before, this should look familiar.\n\nWe want to add the toast button to our blog posts.\n\nOpen `src/components/Post.astro`, import the Toast component and add it to the markup:\n\n```jsx\n// src/components/Post.astro\n\n---\nimport { Toast } from './Toast.jsx'\n\n//\n---\n<header>\n    <div>\n        <img width=\"60\" height=\"80\" src=\"/assets/logo.svg\" alt=\"Astro logo\">\n        <h1>{title?.charAt(0).toUpperCase() + title?.slice(1)}</h1>\n    </div>\n</header>\n<article>\n    <section>\n    </section>\n\t{body}\n\t<Toast/>\n     <section>\n    </section>\n</article>\n\n// styles\n```\n\nOpen one of your blog posts in the brower and click on the ugly looking button.\n\nNothing happens!\n\nThat's by design. Astro will render the HTML part but strips out _all_ JavaScript.\n\nIn our case, we want to ship JavaScript, so we need to enable it. Astro offers [partial hydration](https://docs.astro.build/core-concepts/component-hydration), so that we can load JavaScript sparingly for each component.\n\nWe'll keep it simple and enable JavaScript as soon as the page loads. Change the `<Toast />` markup to `<Toast client:load />`:\n\n```jsx\n// src/pages/$posts.astro\n\n//\n---\n//\n<article>\n    <section>\n    </section>\n\t{body}\n\t<Toast client:load />\n     <section>\n    </section>\n</article>\n\n// styles\n---\n\n```\n\n(Complete file on [GitLab](https://gitlab.com/sophiabrandt/astro-build-demo/-/blob/hydrate/src/components/Post.astro).)\n\nIf you click on the button now, it should show a sweet-looking toast message. Hooray!\n\n## Recap\n\nIn this article, we learned how to create a basic Astro website that loads dynamic data from an external API and uses a React component to enhance the page with JavaScript.\n\nAstro is still in beta and a few things don't work yet.\n\nFor example, in React you can use the [children prop to enable composition][composition]. This helps building re-usable components. Astro does not allow you to do that [and the team is unsure if they want to support it](https://github.com/snowpackjs/astro/issues/681).\n\nYou can build the Astro page for deployment with the command `npm run build`. Currently Astro does not build our collection (blog post) pages. [The collections API is still in flux](https://github.com/snowpackjs/astro/issues/501); expect breaking changes.\n\nAstro looks promising, but it's still early days.\n\n## Links\n\n- [Astro website][astro]\n- [Introducing Astro: Ship Less JavaScript][introduce]\n- [A Look at Building with Astro](https://css-tricks.com/a-look-at-building-with-astro/)\n- [Mastering React Component Composition using Children][composition]\n- [Saving the Day with Scoped CSS][scoped]\n- [GitLab: Astro demo](https://gitlab.com/sophiabrandt/astro-build-demo)\n\n[astro]: https://astro.build\n[introduce]: https://astro.build/blog/introducing-astro\n[scoped]: https://css-tricks.com/saving-the-day-with-scoped-css/\n[composition]: https://benmcmahen.com/mastering-react-component-composition/\n\n\n<hr />\n## [I'm Taking a Break](https://www.rockyourcode.com/im-taking-a-break/)\nPublished on: 2021-07-10\n\ntags: Lab, this_blog, Writing\n\n\nI'm taking a break from [daily blogging](https://www.rockyourcode.com/experiment-100-days-of-blogging).\n\nI've started my first job in tech as a full-time software developer on July 1st.  \nBefore that, I was employed as a tax officer where I chose to work part-time.\n\nThe transition to full-time work and a totally different industry doesn't leave me enough energy to work on my side-projects or to write blog articles.\n\nFor now, I will concentrate on getting up to speed in my day job.\n\n\n<hr />\n## [TIL: How to Fix ”Cannot Read Termcap Database” With Tmux and Kitty on MacOs](https://www.rockyourcode.com/til-how-to-fix-cannot-read-termcap-database-with-tmux-and-kitty-on-macos/)\nPublished on: 2021-07-03\n\ntags: TIL, MacOs, Tmux, DevTools\n\n\n## The Problem\n\nI use the [Kitty terminal emulator][kitty] with [Tmux][tmux] as my main tool for working with code.\n\nMy Tmux settings (`~/.tmux.conf`) contain the following lines to enable **true-color-support**:\n\n```\n# true colors\nset -g terminal-overrides ',xterm-256color:Tc'\nset -g default-terminal \"tmux-256color\"\nset -as terminal-overrides ',xterm*:sitm=\\E[3m'\n```\n\nWhen I open tmux on MacOs I get the following error message:\n\n```bash\nCannot read termcap database;\nusing dumb terminal settings.\n```\n\n## The Solution\n\n[Solution as a GitHub Gist][gist]:\n\n> macOS has ncurses version 5.7 which does not ship the terminfo description for tmux.\n\nDownload `terminfo` provided by the tmux maintainers:\n```bash\ncurl -sSL https://gist.github.com/nicm/ea9cf3c93f22e0246ec858122d9abea1 > tmux-256color\n```\n\nCompile `tmux-256color` terminal info:\n```bash\n/usr/bin/tic -xe tmux-256color terminfo.src\n```\n\nVerify that `terminfo` returns the correct value (it should _not_ be `null`):\n```bash\ninfocmp -x tmux-256color\n```\n\n## Links\n\n- [Installing tmux-256color for macOS][gist]\n- [Setting up True Color Support for Neovim and Tmux on Mac][jdhao]\n\n\n[jdhao]: https://jdhao.github.io/2018/10/19/tmux_nvim_true_color/\n[gist]: https://gist.github.com/bbqtd/a4ac060d6f6b9ea6fe3aabe735aa9d95\n[kitty]: https://github.com/kovidgoyal/kitty  \n[tmux]: https://github.com/tmux/tmux\n\n\n<hr />\n## [Notes on “Hashnode Talks: Saas, Software Engineering and Social Media With Simon Høiberg“](https://www.rockyourcode.com/notes-on-saas-software-engineering-and-social-media-with-simon-hoiberg/)\nPublished on: 2021-07-02\n\ntags: Lab, Notes\n\n\nSimon started his career in selling software. As he learned more about the world of software, he gradually transformed into a software developer and freelance consultant.\n\nSimon build a [SaaS](https://en.wikipedia.org/wiki/Software_as_a_service) product last year. Here is what he learned from trying to build an audience:\n\n[![Hashnode Talks With Simon Høiberg - SaaS, Software Engineering and Social Media](https://i.ytimg.com/vi/hwdhS50wavU/sddefault.jpg)](https://youtube.com/watch?v=hwdhS50wavU \"Hashnode Talks With Simon Høiberg - SaaS, Software Engineering and Social Media\")\n\n## About Building an Audience\n\nHe spend a month on trying to **understand his audience without trying to sell anything**. His focus was on **being helpful** and consistently offering help.  \nHe's giving away 90% of his content for free, and asks for money far down the road.\n\nThe first 500 followers are the hardest. Social proof helps you as soon as you overcome the initial bump.\n\nSimon's top tips for starters:\n\n- provide _actionable_ value\n- don't ask for anything in return\n- post content consistently\n- focus 75% of your effort on engaging with your audience\n- follow big social media accounts, and provide value there without copying the content, show respect\n\nThere will be haters on social media. Don't feed the trolls. Prepare for the critics.\n\n## About Building a SaaS Business\n\nSimon build the tool that he wanted to see (scheduling social media posts). He build a small open-source application first.\n\nHe build a MVP and found people interested in the product via Twitter. Then he constantly sought feedback and improved the product.\n\nHe's now bootstrapping the business. As a founder, you might need to dog-food the business, as it might not be profitable yet.\n\nOn social media, you'll see a lot of success stories. But often you don't see the hard work that happened before the \"overnight success\".\n\n## Links\n\n- [Hashnode Talks With Simon Høiberg - SaaS, Software Engineering and Social Media][youtube]\n\n[youtube]: https://www.youtube.com/watch?v=hwdhS50wavU\n\n\n<hr />\n## [I Started My New Job (And Have MacOS Woes)](https://www.rockyourcode.com/i-started-my-new-job/)\nPublished on: 2021-07-01\n\ntags: Lab, Unix, MacOs\n\n\nToday I started my first job in tech.\n\nWhile I'm pretty excited, it's a big step.\n\nI have to learn new workflows and tools (Jira) and become familiar with a new code-base (Angular nx workspace).\n\nPlus, I now have a Mac for work. I underestimated the differences between my Linux box and MacOs.\n\nAs terminal user with lots of scripts and shell modifications, I heavily rely on my [dotfiles](https://github.com/sophiabrandt/dotfiles).\n\nI came to the realization that my files are not as portable as I've thought.\n\nCurrently, my problem is that the Linux `$HOME` folder is `/home/username` while MacOs uses `/Users/username`.\n\nThe fish shell seems unable to expand the `$HOME` variable. It uses the absolute path, which is not portable to MacOS, as the `$HOME` directory is at a different location.\n\nExample output of `echo $fish_user_paths | tr \" \" \"\\n\" | nl` (shows the [`PATH` variables](https://fishshell.com/docs/current/cmds/fish_add_path.html)):\n\n```bash\n1 /home/myusername/.bin\n2 /home/myusername/.deno/bin\n```\n\nFor Mac it need to be:\n\n```bash\n1 /Users/myusername/.bin\n2 /Users/myusername/.deno/bin\n```\n\nMy idea was to replace all hard-coded values with the `$HOME` variable.\n\n```bash\n1 $HOME/.bin\n2 $HOME/.deno/bin\n```\n\n**This does not work with Fish shell**.\n\nI haven't found a solution yet.\n\n_Edit:_ I've created a symbolic link for `/Users/myusername` to `/home/myusername`.\n\n```bash\nsudo vim /etc/auto_master\n# add a \"#\" at the start of the line beginning with /home\n# save changes\nsudo automount -cv\nsudo ln -s /Users/myusername /home/myusername\n```\n\nI've found this solution on [StackExchange](https://apple.stackexchange.com/questions/44058/mac-os-x-how-to-symlink-home-to-users).\n\n\n<hr />\n## [TIL: How to Remove Headers From ps Command on MacOs](https://www.rockyourcode.com/til-how-to-remove-headers-from-ps-command-on-macos/)\nPublished on: 2021-06-30\n\ntags: TIL, Unix, MacOs\n\n\nToday I've started to setup my MacBook Pro for work. It's my first Mac and I'm not amused.\n\nIf you only know Linux, there are some pitfalls.\n\nMy `.bashrc` script contains the following lines:\n\n```bash\n#\n# ~/.bashrc\n#\n# Fish\nif [[ $(ps --no-header --pid=$PPID --format=cmd) != \"fish\" ]]\nthen\n  exec fish\nfi\n```\n\nI use `bash` as my login shell, but `fish` as my main interactive shell. Fish is not POSIX-compliant which can lead to problems.\n\n> This will allow Bash to properly source `/etc/profile` and all files in `/etc/profile.d`. Because fish replaces the Bash process, exiting fish will also exit the terminal. Compared to the following options, this is the most universal solution, since it works both on a local machine and on a SSH server.\n\nThe command starts a shell inside `bash`, but drops into `fish`. When you use the `fish` shell, but want to bail out to `bash`, you can type `bash` into the prompt.\n\nUnfortunately, the command relies on the GNU implementation of `ps --no-headers`. MacOs ships with the BSD variant of `ps`.\n\nWorkaround:\n\n```bash\nif [[ $(ps -p $PPID -o command | tail -n +2) != \"fish\" ]]\nthen\n  exec fish\nfi\n```\n\nNow we use the `-o` option:\n\n>  -o    \n>  Display information associated with the space or comma sepa-\\\n         rated list of keywords specified.  Multiple keywords may also\\\n         be given in the form of more than one -o option.  Keywords may\\\n         be appended with an equals (`=') sign and a string.  This\\\n         causes the printed header to use the specified string instead\\\n         of the standard header.  If all keywords have empty header\\\n         texts, no header line is written.\n\n## Links\n\n- [How to get rid of the headers in a ps command in Mac OS X ?][so]\n- [Setting fish as interactive shell only][arch]\n\n[arch]: https://wiki.archlinux.org/title/Fish#Modify_.bashrc_to_drop_into_fish\n[so]: https://stackoverflow.com/questions/11532188/how-to-get-rid-of-the-headers-in-a-ps-command-in-mac-os-x\n\n\n<hr />\n## [How to Build Any Kind of App by Andrea Bizzotto](https://www.rockyourcode.com/how-to-build-any-kind-of-app-by-andrea-bizzotto/)\nPublished on: 2021-06-29\n\ntags: Lab, Notes\n\n\nHere are some quick notes on the video **[How to build any kind of app in Flutter (and overcome Tutorial Hell)][youtube]** by Andrea Bizzotto.\n\nLearn **solid fundamentals** first.\n\nTry to pinpoint the most challenging features. Read the **documentation** and create a mental map of the features you need.\n\nBuild one feature at a time.\n\nFind tutorials and examples for a feature, experiment with the code, re-assemble it.\n\n_Instead of searching for more tutorials_, improve the existing solution with what you learned from the documentation.\n\nEvery app is different, and you will always encounter things you don't know. Don't focus on \"how to build app X\".\n\n**Focus on the fundamental techniques and design patterns** for building (mobile) apps.\n\nDon't copy-paste code, ask yourself:\n\n- is this answer a good match?\n- does it fit well in my code?\n- do I need to tweak/rewrite this code?\n- will it work for all edge cases?\n- do I understand this code completely?\n\n**Aim for deeper knowledge.**\n\n## Links\n\n- [How to build any kind of app in Flutter (and overcome Tutorial Hell)][youtube] by Andrea Bizzotto\n- [Written guide to above video](https://codewithandrea.com/videos/how-to-build-any-app-flutter/)\n\n[youtube]: https://www.youtube.com/watch?v=sI6wOj8me_I\n\n\n<hr />\n\nThank you for reading my blog.\n\nDon't hesitate to reach out via [email](mailto:hi@rockyourcode.com\") or [Twitter](https://twitter.com/hisophiabrandt)!\n"}